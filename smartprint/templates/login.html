<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PrintMe - Smart Printing Solutions</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet"/>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    :root {
      /* Modern Printing Theme Colors */
      --primary-blue: #2563eb;
      --primary-blue-hover: #1d4ed8;
      --secondary-blue: #eff6ff;
      --success-green: #059669;
      --purple: #7c3aed;
      --indigo: #4f46e5;
      --pink: #ec4899;
      --teal: #0d9488;
      --cyan: #0891b2;
      --text-primary: #111827;
      --text-secondary: #6b7280;
      --text-tertiary: #9ca3af;
      --bg-primary: #ffffff;
      --bg-secondary: #f9fafb;
      --bg-tertiary: #f3f4f6;
      --border-light: #e5e7eb;
      --border-medium: #d1d5db;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated Background Elements */
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1) 1px, transparent 1px),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.08) 1px, transparent 1px),
        radial-gradient(circle at 40% 60%, rgba(255,255,255,0.06) 1px, transparent 1px);
      background-size: 100px 100px, 150px 150px, 200px 200px;
      animation: floatingDots 20s linear infinite;
      pointer-events: none;
    }

    @keyframes floatingDots {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(-10px, -10px) rotate(90deg); }
      50% { transform: translate(10px, -5px) rotate(180deg); }
      75% { transform: translate(-5px, 10px) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }

    /* Floating Printer Icons */
    .floating-icons {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .floating-icon {
      position: absolute;
      color: rgba(255, 255, 255, 0.1);
      font-size: 24px;
      animation: float 6s ease-in-out infinite;
    }

    .floating-icon:nth-child(1) {
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .floating-icon:nth-child(2) {
      top: 20%;
      right: 15%;
      animation-delay: 2s;
    }

    .floating-icon:nth-child(3) {
      bottom: 30%;
      left: 20%;
      animation-delay: 4s;
    }

    .floating-icon:nth-child(4) {
      bottom: 20%;
      right: 25%;
      animation-delay: 1s;
    }

    .floating-icon:nth-child(5) {
      top: 50%;
      left: 5%;
      animation-delay: 3s;
    }

    .floating-icon:nth-child(6) {
      top: 60%;
      right: 10%;
      animation-delay: 5s;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0px) rotate(0deg);
        opacity: 0.1;
      }
      50% {
        transform: translateY(-20px) rotate(180deg);
        opacity: 0.2;
      }
    }

    .login-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      box-shadow: var(--shadow-xl);
      max-width: 1000px;
      width: 100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 650px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      z-index: 10;
    }

    .login-left {
      background: linear-gradient(135deg, var(--primary-blue), var(--purple));
      color: white;
      padding: 3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .login-left::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1) 2px, transparent 2px),
        radial-gradient(circle at 70% 70%, rgba(255,255,255,0.08) 1px, transparent 1px);
      background-size: 80px 80px, 120px 120px;
      animation: backgroundShift 15s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes backgroundShift {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(-10px, -10px); }
    }

    .brand-section {
      position: relative;
      z-index: 2;
    }

    .brand-logo {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 2rem;
    }

    .brand-logo i {
      font-size: 3rem;
      background: linear-gradient(45deg, #ffffff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .brand-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
      background: linear-gradient(45deg, #ffffff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .brand-subtitle {
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 2rem;
      opacity: 0.9;
      line-height: 1.6;
    }

    .features-list {
      list-style: none;
      padding: 0;
    }

    .features-list li {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      font-size: 1rem;
      opacity: 0.9;
    }

    .features-list li i {
      width: 20px;
      height: 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    .login-right {
      padding: 3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background: var(--bg-primary);
    }

    .login-header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    .login-header h2 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .login-header p {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    .login-tabs {
      display: flex;
      background: var(--bg-secondary);
      border-radius: 16px;
      padding: 6px;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-sm);
    }

    .tab-button {
      flex: 1;
      padding: 14px 20px;
      background: none;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      color: var(--text-secondary);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .tab-button.active {
      background: white;
      color: var(--primary-blue);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    .tab-button i {
      font-size: 16px;
    }

    .login-form {
      display: none;
    }

    .login-form.active {
      display: block;
    }

    .google-signin-container {
      margin-bottom: 2rem;
    }

    .google-signin-wrapper {
      background: var(--bg-secondary);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
      border: 2px solid var(--border-light);
      transition: all 0.3s ease;
    }

    .google-signin-wrapper:hover {
      border-color: var(--primary-blue);
      box-shadow: var(--shadow-md);
    }

    .signin-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 16px;
    }

    .form-control {
      padding: 14px 16px;
      border-radius: 12px;
      border: 2px solid var(--border-light);
      font-size: 1rem;
      transition: all 0.3s ease;
      background: var(--bg-primary);
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .btn-primary {
      width: 100%;
      padding: 14px;
      border: none;
      background: linear-gradient(135deg, var(--primary-blue), var(--indigo));
      color: white;
      font-weight: 600;
      border-radius: 12px;
      margin-top: 1rem;
      transition: all 0.3s ease;
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .forgot-password {
      text-align: center;
      margin-top: 1rem;
    }

    .forgot-password a {
      color: var(--primary-blue);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .forgot-password a:hover {
      color: var(--primary-blue-hover);
    }

    /* Advanced Welcome Screen */
    #welcomeScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%);
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: white;
      z-index: 9999;
      opacity: 0;
      transition: all 1.2s cubic-bezier(0.23, 1, 0.32, 1);
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
    }

    #welcomeScreen.show {
      opacity: 1;
    }

    #welcomeScreen::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.03) 1px, transparent 1px),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.02) 1px, transparent 1px);
      background-size: 100px 100px, 150px 150px;
      animation: welcomeParticles 25s linear infinite;
      pointer-events: none;
    }

    @keyframes welcomeParticles {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(-50px, -50px) rotate(360deg); }
    }

    #welcomeMessage {
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 300;
      margin-bottom: clamp(60px, 8vh, 100px);
      text-align: center;
      letter-spacing: -0.03em;
      line-height: 1.1;
      max-width: 90vw;
      animation: welcomeSlideIn 2s cubic-bezier(0.19, 1, 0.22, 1) forwards;
      transform: translateY(60px) scale(0.95);
      opacity: 0;
      position: relative;
      z-index: 2;
    }

    @keyframes welcomeSlideIn {
      0% {
        transform: translateY(60px) scale(0.95);
        opacity: 0;
        filter: blur(10px);
      }
      60% {
        transform: translateY(-5px) scale(1.01);
        opacity: 0.8;
        filter: blur(2px);
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
        filter: blur(0);
      }
    }

    .welcome-spinner {
      width: clamp(60px, 12vw, 100px);
      height: clamp(60px, 12vw, 100px);
      position: relative;
      animation: spinnerFadeIn 1s cubic-bezier(0.19, 1, 0.22, 1) 0.5s forwards;
      opacity: 0;
      transform: scale(0.8);
    }

    .welcome-spinner::before,
    .welcome-spinner::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      border: 2px solid transparent;
    }

    .welcome-spinner::before {
      width: 100%;
      height: 100%;
      border-top-color: rgba(255,255,255,0.8);
      border-right-color: rgba(255,255,255,0.4);
      animation: welcomeSpinner 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
    }

    .welcome-spinner::after {
      width: 70%;
      height: 70%;
      top: 15%;
      left: 15%;
      border-top-color: rgba(255,255,255,0.6);
      border-left-color: rgba(255,255,255,0.3);
      animation: welcomeSpinner 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite reverse;
    }

    @keyframes spinnerFadeIn {
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes welcomeSpinner {
      0% {
        transform: rotate(0deg) scale(1);
        opacity: 1;
      }
      50% {
        transform: rotate(180deg) scale(1.1);
        opacity: 0.8;
      }
      100% {
        transform: rotate(360deg) scale(1);
        opacity: 1;
      }
    }

    .welcome-status {
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      font-weight: 400;
      color: rgba(255,255,255,0.8);
      margin-top: clamp(30px, 5vh, 50px);
      animation: statusFadeIn 1s cubic-bezier(0.19, 1, 0.22, 1) 2s forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes statusFadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .login-container {
        grid-template-columns: 1fr;
        max-width: 450px;
        min-height: auto;
      }

      .login-left {
        padding: 2rem;
        text-align: center;
      }

      .login-right {
        padding: 2rem;
      }

      .brand-title {
        font-size: 2rem;
      }

      .brand-subtitle {
        font-size: 1rem;
      }

      .features-list {
        display: none;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      .login-container {
        border-radius: 16px;
      }

      .login-left,
      .login-right {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>

<!-- Floating Printer Icons -->
<div class="floating-icons">
  <i class="bi bi-printer floating-icon"></i>
  <i class="bi bi-file-earmark-text floating-icon"></i>
  <i class="bi bi-cloud-upload floating-icon"></i>
  <i class="bi bi-gear floating-icon"></i>
  <i class="bi bi-lightning floating-icon"></i>
  <i class="bi bi-shield-check floating-icon"></i>
</div>

<!-- Advanced Welcome Screen -->
<div id="welcomeScreen">
  <div id="welcomeMessage">Welcome to PrintMe</div>
  <div class="welcome-spinner"></div>
  <div class="welcome-status">Connecting to your printing solution...</div>
</div>

<div class="login-container">
  <!-- Left Panel - Brand Section -->
  <div class="login-left">
    <div class="brand-section">
      <div class="brand-logo">
        <i class="bi bi-printer-fill"></i>
        <div class="brand-title">PrintMe</div>
      </div>
      <div class="brand-subtitle">
        Smart Automated Printing Solutions for Modern Businesses
      </div>
      <ul class="features-list">
        <li>
          <i class="bi bi-lightning-fill"></i>
          <span>Instant automated printing</span>
        </li>
        <li>
          <i class="bi bi-cloud-upload-fill"></i>
          <span>Cloud-based document management</span>
        </li>
        <li>
          <i class="bi bi-shield-check-fill"></i>
          <span>Secure & reliable service</span>
        </li>
        <li>
          <i class="bi bi-geo-alt-fill"></i>
          <span>Multiple vendor locations</span>
        </li>
        <li>
          <i class="bi bi-clock-fill"></i>
          <span>24/7 printing availability</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- Right Panel - Login Section -->
  <div class="login-right">
    <div class="login-header">
      <h2>Welcome Back</h2>
      <p>Access your smart printing dashboard</p>
    </div>

    <!-- Tab Navigation -->
    <div class="login-tabs">
      <button class="tab-button active" onclick="showTab('user')">
        <i class="bi bi-person-fill"></i>
        <span>User Login</span>
      </button>
      <button class="tab-button" onclick="showTab('vendor')">
        <i class="bi bi-shop"></i>
        <span>Vendor Login</span>
      </button>
    </div>

    <!-- User Login Form -->
    <div id="user-form" class="login-form active">
      <div class="google-signin-wrapper">
        <div class="signin-title">Sign in with Google</div>
        <div id="g_id_onload"
             data-client_id="{{ client_id }}"
             data-callback="handleCredentialResponse"
             data-auto_prompt="false">
        </div>
        <div class="g_id_signin"
             data-type="standard"
             data-size="large"
             data-theme="outline"
             data-text="sign_in_with"
             data-shape="rectangular">
        </div>
      </div>
    </div>

    <!-- Vendor Login Form -->
    <div id="vendor-form" class="login-form">
      <form method="POST" action="/vendor-login/" onsubmit="vendorLogin(event)">
        {% csrf_token %}
        <div class="mb-3">
          <label for="vendorId" class="form-label">Vendor ID</label>
          <input type="text" class="form-control" id="vendorId" placeholder="Enter your vendor ID" required />
        </div>
        <div class="mb-3">
          <label for="vendorPassword" class="form-label">Password</label>
          <input type="password" class="form-control" id="vendorPassword" placeholder="Enter your password" required />
        </div>
        <button type="submit" class="btn-primary">
          <i class="bi bi-box-arrow-in-right me-2"></i>
          Sign In as Vendor
        </button>
        <div class="forgot-password">
          <a href="#" onclick="resetVendorPassword()">Forgot your password?</a>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Scripts -->
<script>
  function showTab(tab) {
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');

    document.querySelectorAll('.login-form').forEach(f => f.classList.remove('active'));
    document.getElementById(`${tab}-form`).classList.add('active');
  }

  function showWelcome(name) {
    const welcomeMessage = document.getElementById('welcomeMessage');
    welcomeMessage.textContent = `Welcome, ${name}`;
    
    const welcomeScreen = document.getElementById('welcomeScreen');
    welcomeScreen.style.display = 'flex';
    
    setTimeout(() => {
      welcomeScreen.classList.add('show');
    }, 50);
  }

  function handleCredentialResponse(response) {
    const payload = JSON.parse(atob(response.credential.split('.')[1]));
    const userName = payload.name || "User";

    showWelcome(userName);

    fetch('/auth-receiver/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'X-CSRFToken': getCookie('csrftoken')
      },
      body: 'credential=' + encodeURIComponent(response.credential)
    })
    .then(res => res.json())
    .then(data => {
      if (data.status === 'success') {
        setTimeout(() => window.location.href = '/userdashboard/', 3000);
      } else {
        alert('Login failed: ' + data.message);
        document.getElementById('welcomeScreen').style.display = 'none';
      }
    })
    .catch(err => {
      console.error('Auth error:', err);
      alert('Login failed. Please try again.');
      document.getElementById('welcomeScreen').style.display = 'none';
    });
  }

  async function vendorLogin(event) {
    event.preventDefault();
    const vendorId = document.getElementById('vendorId').value;
    const password = document.getElementById('vendorPassword').value;

    try {
      showWelcome('Vendor');
      
      // Simulate vendor login (replace with actual endpoint)
      setTimeout(() => {
        window.location.href = '/vendordashboard/';
      }, 3000);
      
    } catch (err) {
      console.error(err);
      alert('Login failed. Please try again.');
      document.getElementById('welcomeScreen').style.display = 'none';
    }
  }

  function resetVendorPassword() {
    const vendorId = prompt('Enter your Vendor ID:');
    if (vendorId) {
      alert('Password reset instructions will be sent to your registered email.');
    }
  }

  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      const cookies = document.cookie.split(';');
      for (let cookie of cookies) {
        cookie = cookie.trim();
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>